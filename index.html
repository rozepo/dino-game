<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <title>ü¶ï –î–∏–Ω–æ–∑–∞–≤—Ä - –ò–≥—Ä–∞</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="page-bg">
        <div class="game-frame">
            <!-- HUD –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã -->
            <div class="game-hud hidden" id="gameHud">
                <div class="hud-left">
                    <div class="hud-score">
                        <span class="hud-label">–°—á–µ—Ç</span>
                        <span class="hud-value" id="hudScore">0</span>
                    </div>
                </div>
                <div class="hud-right">
                    <div class="hud-coins">
                        <span class="coin-icon">ü™ô</span>
                        <span class="hud-value" id="hudCoins">0</span>
                    </div>
                    <div class="hud-jump-level">
                        <span class="jump-icon">üí´</span>
                        <span class="hud-value" id="hudJumpLevel">x1</span>
                    </div>
                </div>
            </div>

            <!-- –ò–≥—Ä–æ–≤–æ–π viewport -->
            <div class="game-viewport">
                <canvas id="gameCanvas"></canvas>
            
            <!-- Overlay –¥–ª—è –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–æ–≤ -->
            <div class="game-overlay" id="gameOverlay">
                <!-- Home —ç–∫—Ä–∞–Ω -->
                <div class="screen home-screen" id="homeScreen">
                    <div class="screen-content">
                        <h1 class="game-title">ü¶ï –î–∏–Ω–æ–∑–∞–≤—Ä</h1>
                        
                        <!-- –°—Ç–∞—Ç—É—Å –∞–∫–∫–∞—É–Ω—Ç–∞ -->
                        <div class="auth-status">
                            <div class="auth-status-text" id="authStatus">–ì–æ—Å—Ç—å</div>
                            <button class="btn btn-small btn-secondary" id="authBtn">–í–æ–π—Ç–∏ / –ê–∫–∫–∞—É–Ω—Ç</button>
                        </div>
                        
                        <div class="home-stats">
                            <div class="stat-card">
                                <span class="stat-label">–ú–æ–Ω–µ—Ç—ã</span>
                                <span class="stat-value" id="homeCoins">0</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-label">–†–µ–∫–æ—Ä–¥</span>
                                <span class="stat-value" id="homeHighScore">0</span>
                            </div>
                        </div>
                        <div class="button-group">
                            <button class="btn btn-primary" id="playBtn">
                                <span class="btn-icon">‚ñ∂</span>
                                –ò–≥—Ä–∞—Ç—å
                            </button>
                            <button class="btn btn-secondary" id="shopBtn">
                                <span class="btn-icon">üõí</span>
                                –ú–∞–≥–∞–∑–∏–Ω
                            </button>
                        </div>
                    </div>
                </div>

                <!-- –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
                <div class="screen auth-screen hidden" id="authScreen">
                    <div class="screen-content">
                        <div class="shop-header">
                            <h2 class="screen-title">–í—Ö–æ–¥ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                            <button class="btn-close" id="closeAuthBtn">‚úï</button>
                        </div>
                        
                        <div id="authError" class="auth-error hidden"></div>
                        
                        <div class="auth-form">
                            <input type="email" id="authEmail" placeholder="Email" class="auth-input" />
                            <input type="password" id="authPassword" placeholder="–ü–∞—Ä–æ–ª—å" class="auth-input" />
                            
                            <div class="button-group">
                                <button class="btn btn-primary" id="signInBtn">–í–æ–π—Ç–∏</button>
                                <button class="btn btn-secondary" id="signUpBtn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                            </div>
                            
                            <div id="authLoggedIn" class="auth-logged-in hidden">
                                <div class="auth-user-info">
                                    <p>–í—ã –≤–æ—à–ª–∏ –∫–∞–∫: <strong id="authUserEmail"></strong></p>
                                </div>
                                <button class="btn btn-secondary" id="signOutBtn">–í—ã–π—Ç–∏</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –≠–∫—Ä–∞–Ω Game Over -->
                <div class="screen game-over-screen hidden" id="gameOverScreen">
                    <div class="screen-content">
                        <h2 class="screen-title">–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</h2>
                        <div class="result-stats">
                            <div class="result-item">
                                <span class="result-label">–°—á–µ—Ç</span>
                                <span class="result-value" id="finalScore">0</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">–ú–æ–Ω–µ—Ç—ã</span>
                                <span class="result-value" id="finalCoins">+0</span>
                            </div>
                        </div>
                        <div class="button-group">
                            <button class="btn btn-primary" id="restartBtn">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
                            <button class="btn btn-secondary" id="homeBtn">–î–æ–º–æ–π</button>
                            <button class="btn btn-secondary" id="shopBtnFromGameOver">–ú–∞–≥–∞–∑–∏–Ω</button>
                        </div>
                    </div>
                </div>

                <!-- –≠–∫—Ä–∞–Ω –º–∞–≥–∞–∑–∏–Ω–∞ -->
                <div class="screen shop-screen hidden" id="shopScreen">
                    <div class="screen-content">
                        <div class="shop-header">
                            <h2 class="screen-title">–ú–∞–≥–∞–∑–∏–Ω</h2>
                            <button class="btn-close" id="closeShopBtn">‚úï</button>
                        </div>
                        <div class="shop-balance">
                            <span class="coin-icon">ü™ô</span>
                            <span class="balance-value" id="shopBalance">0</span>
                        </div>
                        <div class="shop-items" id="shopItems">
                            <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –í—Å–ø–ª—ã–≤–∞—é—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div class="notification" id="notification"></div>

    <!-- Supabase –∏ –º–æ–¥—É–ª–∏ -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabaseClient.js"></script>
    <script src="storage.js"></script>
    <script src="auth.js"></script>
    <script src="game.js"></script>
    <script src="shop.js"></script>
    <script src="ui.js"></script>
</body>
</html>
